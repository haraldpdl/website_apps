<div class="row pb-4">
  <div class="col">
    <h4 class="pb-3">{lang}heading_showcase{lang}</h4>

    <div id="carouselFrontpage" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner" style="max-height: 140px;"></div>
      <a class="carousel-control-prev d-none" href="#carouselFrontpage" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next d-none" href="#carouselFrontpage" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
</div>

<script>
const carousel = {raw json_encode}carousel-frontpage{raw};

let carouselCounter = 0, carouselItems = '';

const carouselContent = document.querySelector('#carouselFrontpage div.carousel-inner');

for (let value of carousel) {
    if (carouselCounter === 0) {
        carouselItems += '<div class="carousel-item"><div class="row">';
    }

    carouselItems += `<div class="col-6"><a href="${value.url}"><img class="d-block img-fluid" src="${value.image}" alt="${value.title}" title="${value.title}"></a></div>`;

    carouselCounter += 1;

    if (carouselCounter === 2) {
        carouselItems += '</div></div>';

        carouselCounter = 0;
    }
}

if (carouselItems !== '') {
    if (carouselCounter === 1) {
        carouselItems += '</div></div>';
    }

    carouselContent.insertAdjacentHTML('beforeend', carouselItems);

    if (document.querySelectorAll('#carouselFrontpage div.carousel-inner div.carousel-item:last-child div.row div.col-6').length === 1) {
        document.querySelector('#carouselFrontpage div.carousel-inner div.carousel-item:last-child div.row').insertAdjacentHTML('beforeend', '<div class="col-6"><div style="background-color: #DB7093; height: 100%; width: 100%;" class="d-flex align-items-center justify-content-center"><a href="{link}Showcase{link}" class="text-white" style="font-size: 1.5em;">' + {lang json_encode}showcase_view_more{lang} + '</a></div></div>');
    }

    if (document.querySelectorAll('#carouselFrontpage div.carousel-inner div.carousel-item').length > 1) {
        document.querySelector('#carouselFrontpage a.carousel-control-prev').classList.remove('d-none');
        document.querySelector('#carouselFrontpage a.carousel-control-next').classList.remove('d-none');
    }

    document.querySelector('#carouselFrontpage div.carousel-inner div.carousel-item:first-child').classList.add('active');
}
</script>
